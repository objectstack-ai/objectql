# File: user.object.yml
# Object name is inferred from filename as 'user'
label: User
description: System user with authentication and profile
icon: user-line

fields:
  name:
    type: text
    required: true
    label: Full Name
    index: true
  
  email:
    type: text
    required: true
    label: Email Address
    unique: true
    index: true
  
  username:
    type: text
    label: Username
    unique: true
    index: true
  
  mobile:
    type: text
    label: Mobile Phone
  
  avatar:
    type: image
    label: Profile Picture
    multiple: false
    max_size: 1048576  # 1MB
  
  status:
    type: select
    label: User Status
    options:
      - label: Active
        value: active
      - label: Inactive
        value: inactive
      - label: Suspended
        value: suspended
    defaultValue: active
    index: true
    ai_context:
      intent: "Track user account status"
      is_state_machine: true
      transitions:
        active: [inactive, suspended]
        inactive: [active]
        suspended: [active, inactive]
  
  role:
    type: select
    label: User Role
    options:
      - label: Administrator
        value: admin
      - label: User
        value: user
      - label: Guest
        value: guest
    defaultValue: user
    index: true
    ai_context:
      intent: "Define user permissions level"
      selection_guidance: "Admin for full access; User for standard access; Guest for read-only"
  
  last_login_at:
    type: datetime
    label: Last Login Time
  
  locale:
    type: select
    label: Preferred Language
    options:
      - label: English
        value: en
      - label: Chinese (Simplified)
        value: zh-CN
      - label: Japanese
        value: ja
      - label: Spanish
        value: es
    defaultValue: en
    ai_context:
      intent: "User interface language preference"
  
  timezone:
    type: text
    defaultValue: UTC
    label: Timezone

indexes:
  # For query: active users sorted by name
  status_name_idx:
    fields: [status, name]
  
  # For authentication lookup
  email_status_idx:
    fields: [email, status]
