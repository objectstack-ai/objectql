label: Budget
description: Department or project budget
icon: pie-chart-line

fields:
  name:
    type: text
    required: true
    label: Budget Name
    index: true
  
  fiscal_year:
    type: number
    required: true
    label: Fiscal Year
    index: true
  
  period:
    type: select
    options:
      - annual
      - quarterly
      - monthly
    defaultValue: annual
    index: true
  
  department:
    type: lookup
    reference_to: hr_department
    label: Department
    index: true
  
  project:
    type: lookup
    reference_to: project_project
    label: Project
    index: true
  
  category:
    type: select
    options:
      - travel
      - meals
      - office_supplies
      - software
      - marketing
      - utilities
      - rent
      - training
      - salaries
      - other
    index: true
  
  allocated_amount:
    type: currency
    required: true
    label: Allocated Amount
  
  spent_amount:
    type: currency
    defaultValue: 0
    label: Spent Amount
  
  remaining_amount:
    type: currency
    label: Remaining Amount
  
  start_date:
    type: date
    required: true
    label: Start Date
    index: true
  
  end_date:
    type: date
    required: true
    label: End Date
  
  status:
    type: select
    options:
      - draft
      - active
      - closed
    defaultValue: draft
    index: true
  
  owner:
    type: lookup
    reference_to: user
    label: Budget Owner
  
  notes:
    type: textarea
    label: Notes

indexes:
  # For fiscal year budgets
  fiscal_year_period_idx:
    fields: [fiscal_year, period]
  
  # For department budgets
  department_fiscal_year_idx:
    fields: [department, fiscal_year]
  
  # For date range queries
  start_date_status_idx:
    fields: [start_date, status]
