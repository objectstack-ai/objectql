# File: crm_account.object.yml
# Object name is inferred from filename as 'crm_account'
label: Account
description: Customer company or organization
icon: briefcase-line

ai_context:
  intent: "Manage customer and prospect organizations"
  domain: customer_relationship_management
  aliases: [account, organization, company, customer]
  common_queries:
    - "Show active accounts by revenue"
    - "Find accounts by industry"
    - "List customer accounts with opportunities"

fields:
  name:
    type: text
    required: true
    label: Account Name
    index: true
    ai_context:
      intent: "Company or organization name"
  
  account_number:
    type: text
    label: Account Number
    unique: true
    index: true
  
  type:
    type: select
    label: Account Type
    options:
      - label: Customer
        value: customer
      - label: Prospect
        value: prospect
      - label: Partner
        value: partner
      - label: Competitor
        value: competitor
    defaultValue: prospect
    index: true
    ai_context:
      intent: "Categorize relationship type with the organization"
      selection_guidance: "Customer for active clients; Prospect for potential customers"
  
  industry:
    type: select
    options:
      - label: Technology
        value: technology
      - label: Finance
        value: finance
      - label: Healthcare
        value: healthcare
      - label: Manufacturing
        value: manufacturing
      - label: Retail
        value: retail
      - label: Education
        value: education
      - label: Other
        value: other
    label: Industry
    index: true
    ai_context:
      intent: "Primary industry sector for segmentation and analysis"
  
  annual_revenue:
    type: currency
    label: Annual Revenue
  
  employees:
    type: number
    label: Number of Employees
  
  website:
    type: url
    label: Website
  
  phone:
    type: text
    label: Phone
  
  billing_address:
    type: textarea
    label: Billing Address
  
  shipping_address:
    type: textarea
    label: Shipping Address
  
  owner:
    type: lookup
    reference_to: user
    label: Account Owner
    index: true
    ai_context:
      intent: "Primary sales representative managing this account"
      semantic_type: ownership
  
  parent_account:
    type: lookup
    reference_to: crm_account
    label: Parent Account
    ai_context:
      intent: "Parent organization for corporate hierarchies"
      semantic_type: hierarchy
  
  description:
    type: textarea
    label: Description
  
  status:
    type: select
    options:
      - label: Active
        value: active
      - label: Inactive
        value: inactive
    defaultValue: active
    index: true
    ai_context:
      intent: "Current operational status of the account"
      is_state_machine: true
      transitions:
        active: [inactive]
        inactive: [active]

indexes:
  # For account owner queries
  owner_type_idx:
    fields: [owner, type]
  
  # For industry analysis
  industry_revenue_idx:
    fields: [industry, annual_revenue]
  
  # For status reporting
  status_created_idx:
    fields: [status, created_at]

ai:
  search:
    enabled: true
    fields: [name, description, website]
    model: text-embedding-3-small
