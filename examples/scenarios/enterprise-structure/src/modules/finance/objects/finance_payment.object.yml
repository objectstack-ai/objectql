label: Payment
description: Payment transaction record
icon: money-dollar-circle-line

fields:
  payment_number:
    type: text
    required: true
    label: Payment Number
    unique: true
    index: true
  
  invoice:
    type: lookup
    reference_to: finance_invoice
    label: Related Invoice
    index: true
  
  account:
    type: lookup
    reference_to: crm_account
    label: Customer Account
    required: true
    index: true
  
  payment_date:
    type: date
    required: true
    label: Payment Date
    index: true
  
  amount:
    type: currency
    required: true
    label: Payment Amount
  
  payment_method:
    type: select
    options:
      - bank_transfer
      - credit_card
      - debit_card
      - check
      - cash
      - paypal
      - other
    required: true
    index: true
  
  currency:
    type: select
    options:
      - USD
      - EUR
      - GBP
      - CNY
      - JPY
    defaultValue: USD
  
  reference_number:
    type: text
    label: Reference/Transaction Number
    index: true
  
  status:
    type: select
    options:
      - pending
      - completed
      - failed
      - refunded
    defaultValue: pending
    required: true
    index: true
  
  processed_by:
    type: lookup
    reference_to: user
    label: Processed By
  
  notes:
    type: textarea
    label: Notes

indexes:
  # For invoice payment lookup
  invoice_status_idx:
    fields: [invoice, status]
  
  # For account payment history
  account_date_idx:
    fields: [account, payment_date]
  
  # For payment method analysis
  method_status_idx:
    fields: [payment_method, status]
