label: Lead
description: Potential sales lead
icon: user-add-line

fields:
  first_name:
    type: text
    required: true
    label: First Name
    index: true
  
  last_name:
    type: text
    required: true
    label: Last Name
    index: true
  
  company:
    type: text
    label: Company
    index: true
  
  title:
    type: text
    label: Job Title
  
  email:
    type: text
    label: Email
    unique: true
    index: true
  
  phone:
    type: text
    label: Phone
  
  status:
    type: select
    options:
      - new
      - contacted
      - qualified
      - unqualified
      - converted
    defaultValue: new
    required: true
    index: true
  
  lead_source:
    type: select
    options:
      - web
      - referral
      - trade_show
      - partner
      - advertisement
      - other
    label: Lead Source
    index: true
  
  rating:
    type: select
    options:
      - hot
      - warm
      - cold
    label: Lead Rating
    index: true
  
  owner:
    type: lookup
    reference_to: user
    label: Lead Owner
    index: true
  
  industry:
    type: select
    options:
      - technology
      - finance
      - healthcare
      - manufacturing
      - retail
      - education
      - other
    label: Industry
  
  annual_revenue:
    type: currency
    label: Annual Revenue
  
  employees:
    type: number
    label: Number of Employees
  
  description:
    type: textarea
    label: Description
  
  converted_date:
    type: datetime
    label: Conversion Date
  
  converted_account:
    type: lookup
    reference_to: crm_account
    label: Converted Account
  
  converted_contact:
    type: lookup
    reference_to: crm_contact
    label: Converted Contact
  
  converted_opportunity:
    type: lookup
    reference_to: crm_opportunity
    label: Converted Opportunity

indexes:
  # For lead pipeline
  status_rating_idx:
    fields: [status, rating]
  
  # For owner queries
  owner_status_idx:
    fields: [owner, status]
  
  # For source analysis
  source_status_idx:
    fields: [lead_source, status]

actions:
  convert:
    type: record
    label: Convert Lead
    icon: arrow-right-circle-line
    confirm_text: "Convert this lead to Account, Contact, and Opportunity?"
    params:
      create_opportunity:
        type: boolean
        label: Create Opportunity
        defaultValue: true
      opportunity_name:
        type: text
        label: Opportunity Name
      opportunity_amount:
        type: currency
        label: Expected Amount
