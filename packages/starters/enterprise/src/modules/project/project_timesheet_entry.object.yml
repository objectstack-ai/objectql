label: Timesheet Entry
description: Time entry for project tasks
icon: time-line

fields:
  employee:
    type: lookup
    reference_to: hr_employee
    label: Employee
    required: true
    index: true
  
  project:
    type: lookup
    reference_to: project_project
    label: Project
    required: true
    index: true
  
  task:
    type: lookup
    reference_to: project_task
    label: Task
    index: true
  
  work_date:
    type: date
    required: true
    label: Work Date
    index: true
  
  hours:
    type: number
    required: true
    label: Hours Worked
    scale: 2
    min: 0
    max: 24
  
  description:
    type: textarea
    label: Work Description
  
  billable:
    type: boolean
    defaultValue: true
    label: Billable
    index: true
  
  status:
    type: select
    options:
      - draft
      - submitted
      - approved
      - rejected
    defaultValue: draft
    index: true
  
  approved_by:
    type: lookup
    reference_to: user
    label: Approved By
  
  approved_at:
    type: datetime
    label: Approval Time

indexes:
  # For employee timesheet
  employee_date_idx:
    fields: [employee, work_date]
  
  # For project time tracking
  project_date_idx:
    fields: [project, work_date]
  
  # For task time tracking
  task_employee_idx:
    fields: [task, employee]
  
  # For billing
  billable_status_idx:
    fields: [billable, status]

actions:
  submit:
    type: record
    label: Submit for Approval
    icon: send-plane-line
  
  approve:
    type: record
    label: Approve Entry
    icon: checkbox-circle-line
